!function(){"use strict";var e,t,n,o,a=$("#form-body"),s=$("#data-body"),r=["1.0PDX_ID-NanoStringLabels_JCA.json","1.0PDX_ID-SN-Affy-IllumID_JCAv2.json","2.0PDXID_MTDrugRespD7_JCA.json","2.0PDXID_MTDrugRespD14_JCA.json","2.0PDXID_SphDrugRespD7_JCA.json","PDX Summary Table CDW.json","radiation response data.json","TMZ response data.json","Xenograft summary 011119 GYG_other.json","Xenograft summary 011119 GYG.json"];e=function(e){return new Promise(function(t,n){$.ajax({dataType:"text",url:e,success:t,error:function(t){console.warn(t),n("Failed to get: "+e)}})})},o=function(e,t){console.log(t),s.empty(),s.append($("<p>",{class:"h4",text:e})),s.append($("<p>",{html:function(){var e,n,o="";for(e=0;e<t.length;e+=1){for(o+='<p class="h5">'+t[e].entry_name+'</p><p class="font-weight-light text-muted">'+t[e].description+"<br />-"+t[e].entry_metadata.user+'</p><p><ul class="list-group">',n=0;n<t[e].entry_data.length;n+=1)o+='<li class="list-group-item"><strong>'+t[e].entry_data[n].key+":</strong> &emsp; "+t[e].entry_data[n].value+"</li>";o+="</ul></p><hr />"}return o}()}))},t=function(e){var t,s,r,l,i,p,c=n(e),u=Object.keys(c);for(r=[],l=function(e){var t,n;for(e.preventDefault(),t=this.value.split(";").map(function(e){return 1*e}),console.log(t),console.log(r),n=0;n<r.length;n+=1)n!==t[0]&&(console.log(n,t[0]),r[n].select[0][0].selected=!0);o(r[t[0]].option_keys[t[1]],c[u[t[0]]][r[t[0]].option_keys[t[1]]])},i=0;i<u.length;i+=1){for(s=$("<select>",{class:"form-control",id:"select headers"+i}),a.append($("<div>",{class:"form-group"}).append($("<label>",{for:"select headers"+i,text:u[i]})).append(s)),t=Object.keys(c[u[i]]),$("<option>",{text:"Select one...",disabled:"disabled",selected:"selected"}).appendTo(s),r[i]={select:s,option_keys:JSON.parse(JSON.stringify(t)),options:[]},p=0;p<t.length;p+=1)r[i].options[p]=$("<option>",{text:t[p],val:i+";"+p}).appendTo(s);s.on("change",l)}},n=function(e){var t,n={pdx_id:{},origin_id:{}},o=Object.keys(n);return e.map(function(e){for(t=0;t<o.length;t+=1)e.hasOwnProperty(o[t])&&(n[o[t]]=n[o[t]]||{},n[o[t]][e[o[t]]]=n[o[t]][e[o[t]]]||[],n[o[t]][e[o[t]]].push(e))}),n},function(){var n=$("#data-request-body");new Promise(function(t,o){n.append($("<div>",{class:"form-body"}).append($("<form>",{class:"form-signin",html:'<h1 class="h3 mb-3 font-weight-normal">Please Enter Passphrase</h1><label for="inputEmail" class="sr-only">Email address</label><input type="password" id="inputName" class="form-control" placeholder="passphrapse" required autofocus>'}).append($("<button>",{class:"btn btn-lg btn-primary btn-block",type:"submit",text:"Submit",click:function(n){n.preventDefault();var a=n.target.form[0].value;e("http://138.26.31.155:8000/uabfile/"+a+"/key.uuid").then(function(e){t(a+"/"+e+"/")}).catch(function(e){o(e)})}}))))}).then(function(o){n.empty().hide(),Promise.all(r.map(function(e){return"http://138.26.31.155:8000/uabfile/"+o+e}).map(e)).then(function(e){e=e.map(function(e){return e.split("\n").map(function(e){return JSON.parse(e)})}).reduce(function(e,t){return e.concat(t)}),t(e)}).catch(function(e){console.warn(e)})}).catch(function(){n.empty().html("Incorrect, please reload and try again if you believe this is in error.")})}()}();
