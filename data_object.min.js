!function(n){"use strict";const t=new RegExp("[^A-Za-z0-9]+","i"),e="http://db.kinomecore.com/2.0.0/";let r;r=function(n){if("object"!=typeof n||null===n)return n;let t;return n instanceof Array?t=n.map(r):(t={},Object.keys(n).forEach(function(e){t[e]=r(n[e])})),t};const c=function(n,t,e){return e||(e="GET"),fetch(n,{method:e,mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify(t)}).then(function(n){return n.json()})},i=function(n,t){return function(r,i,o){return Promise.all(function(n,t,r){let i={};return n.forEach(function(n){i[n.id]=i[n.id]||{},"object"==typeof n.value?i[n.id][n.key]=n.value:i[n.id][n.key+".value"]=n.value}),Object.keys(i).map(n=>(function(n,t,r,i){return c(e+t+"/"+r+"/"+n,i,"PATCH").then(function(n){return n.data[0]})})(n,t,r,i[n]))}(r,i,o)).then(function(e){return e.map(function(e){return t.set(e._id,e),n.ind[e._id].forEach(function(n){n()}),n.group.forEach(function(n){n.id.match(e._id)&&n.func()}),e._id})})}},o=function(n,t){return function(i,o,u){let f,a=r(i);return(f=c(e+o+"/"+u,i,"POST").then(function(n){if(!n.success)throw"Failed to Post";return a._id=n.data[0].id,a})).then(function(e){return n.set(e._id,e),t(e),e})}},u=function(){let n,e,r;return e=function(n,t){return!(!n||""===n)&&r.indexOf(n)===t},n=function(n){let e,r=[];for(e=0;e<n.length;e+=1)r=(r=r.concat(n[e].key.split(t))).concat(n[e].value.split(t));return r},function(c){let i,o={};return i=["description","entry_data","entry_metadata","entry_name","historical","origin_id","pdx_id"],c.forEach(function(c){r=(r=[]).concat(c[i[0]].split(t)),r=r.concat(c[i[3]].split(t)),r=r.concat([c[i[4]]]),r=r.concat([c[i[5]]]),r=r.concat(c[i[4]].split(t)),r=r.concat(c[i[5]].split(t)),r=r.concat(n(c[i[1]])),r=r.concat(n(c[i[2]])),(r=r.filter(e)).forEach(function(n){n=n.toLocaleLowerCase(),o[n]=o[n]||[],o[n].push(c._id)})}),o}}();n.expandData=function(e,c,f){let a,l={},d={ind:{},group:[]};c||(f=function(n){let t={};n.forEach(function(n){t[n._id]=n});let e=function(n){return r(t[n])};return e.set=function(n,e){t[n]=e},e}(e),l.build=function(n,t){let e,r,c;return c=function(){return!1},r=function(e,i,o){o=o||{};let u=i(e.map(function(t){return n(t)})),f=t.group.length;return t.group.push({id:e.join("|&|&|&|&|"),func:function(){let n=r(e,i);u.replaceWith(n),t.group[f].id="",t.group[f].func=c}}),o.clear=function(){t.group[f].id="",t.group[f].func=c},u},e=function(i,o,u){if(u=u||{},Array.isArray(i))return r(i,o,u);t.ind[i]=t.ind[i]||[];let f=t.ind[i].length,a=o(n(i));return t.ind[i].push(function(){let n=e(i,o);a.replaceWith(n),t.ind[i][f]=c,u.change&&"function"==typeof u.change&&u.change()}),u.clear=function(){t.ind[i][f]=c},a}}(f,d));let s;return(s=function(){l.list=function(n){return function(t){let e={};return n.forEach(function(n){e[n[t]]=1}),Object.keys(e).filter(n=>n)}}(e),l.filter=function(n){return function(t){return n.filter(t).map(n=>n._id)}}(e),a=u(e),l.search=function(n){return function(e){let r={},c=e.toLocaleLowerCase().split(t);return c.forEach(function(t,e){n.hasOwnProperty(t)&&n[t].forEach(function(n){r[n]=r[n]||0,r[n]+=2-(e+1)/c.length})}),Object.keys(r).sort((n,t)=>r[t]-r[n])}}(a)})(),l.clearUpdates=function(){d={ind:{},group:[]}},l.set=i(d,f),l.expandIDs=function(t){return function(e){return n.expandData(e.map(function(n){return t(n)}),!0,t)}}(f),l.add=o(f,function(n){e.push(n),s()}),l}}(DATA_DISPLAY);